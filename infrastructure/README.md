# Top-Level Infrastructure
This directory contains top-level infrastructure needed to seed the AWS account with the necessary pieces (e.g. Roles, Users).

## Adding a user
1. Add user to the [users list](users.yaml)
2. Add user to the [list of users who can assume the developer role](developer-access.yaml):
```yaml
 AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !Sub "arn:aws:iam::${AWS::AccountId}:user/SOME-EXISTING-USER"
                - !Sub "arn:aws:iam::${AWS::AccountId}:user/SOME-NEW-USER"
            Action:
              - sts:AssumeRole
```
3. Assume the Administrator role (if you are an Administrator):
```bash
./assume-role/go assume-role tortugas administrator
```
4. Apply the changes
```bash
make update
```
NOTE: this target doesn't exist yet. TODO.
5. Jump into the AWS Console > IAM > Users and find the new user. Create a password (Autogenerated via AWS is fine) and send it to them via email using PGP.
NOTE: TODO: possible dev tools can be developed to facilicate this.